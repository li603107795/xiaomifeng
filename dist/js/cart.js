"use strict";function _readOnlyError(n){throw new TypeError('"'+n+'" is read-only')}$(function(){var n=getCookie("nickname");if(!n)return window.location.href="./login.html";var t=JSON.parse(window.localStorage.getItem("cart"))||[];if(console.log(n),console.log(t),!t.length)return $(".on").addClass("hide"),void $(".off").removeClass("hide");function a(){var n=t.every(function(n){return"1"==n.is_select}),c=0,a=0;t.forEach(function(n){"1"==n.is_select&&(c+=+n.cart_number,a+=n.cart_number*n.goods_price)});var o='\n            <div class="title"><h1>购物袋</h1></div>\n            <ul class="goods_wrap">\n        ';t.forEach(function(n){o+='\n            <li>\n                <input class="danxuan" data-price="'.concat(n.goods_price,'" type="checkbox" ').concat("0"==n.is_select?"":"checked",'>\n                <div class="imgbox">\n                    <img src=').concat(n.cart_img,' alt="">\n                    <h3>').concat(n.goods_name,'</h3>\n                    <p>尺寸很大|适合多少很多人|好几套餐具</p>\n                </div>\n                <div class="price">\n                    <p class=".jiage"><span>￥').concat(n.goods_price,'</span>/件</p>\n                    <p class="num">\n                        <i class="jian" data-price="').concat(n.goods_price,'">-</i>\n                        <span>').concat(n.cart_number,'</span>\n                        <i class="jia" data-price="').concat(n.goods_price,'">+</i>\n                    </p>\n                    <p class="all">\n                        <span>￥总价').concat((n.goods_price*n.cart_number).toFixed(2),'</span>\n                        <i class="del"  data-price="').concat(n.goods_price,'">删除</i>\n                    </p>\n                </div>\n            </li>\n            ')}),o+='\n        </ul>\n        <div class="goon">\n            <h4>\n                <a href="./list.html">继续购物</a>\n                <i class="clear">清空购物车</i>\n                <span class="num">一共'.concat(c,'件商品 </span>\n                <span class="zong">总金额 : ￥ ').concat(a,'</span>\n            </h4>\n            <p>全选<input class="quanxuan" data-id="" type="checkbox" ').concat(n?"checked":"",'></p>\n            <button class="goumai" ').concat(0===a?"disabled":"",">立即购买</button>\n        </div>\n        "),$(".on").html(o)}$(".off").addClass("hide"),$(".on").removeClass("hide"),a(),$(".on").on("click",".danxuan",function(){var n=this.checked,c=$(this).data("price");t.filter(function(n){return n.goods_price==c})[0].is_select=n?"1":"0",a(),window.localStorage.setItem("cart",JSON.stringify(t))}),$(".on").on("click",".quanxuan",function(){var c=$(this).prop("checked");console.log(c),t.forEach(function(n){return n.is_select=c?"1":"0"}),a(),window.localStorage.setItem("cart",JSON.stringify(t))}),$(".clear").click(function(){_readOnlyError("cart"),t=[],a(),window.location.reload(),window.localStorage.setItem("cart",JSON.stringify(t))}),$(".on").on("click",".jian",function(){var c=$(this).data("price");console.log(c);var n=t.filter(function(n){return n.goods_price==c})[0];1!==n.cart_number&&(n.cart_number=+n.cart_number-1,a(),window.localStorage.setItem("cart",JSON.stringify(t)))}),$(".on").on("click",".jia",function(){var c=$(this).data("price");console.log(c);var n=t.filter(function(n){return n.goods_price==c})[0];n.cart_number=+n.cart_number+1,a(),window.localStorage.setItem("cart",JSON.stringify(t))}),$(".on").on("click",".del",function(){for(var n=$(this).data("price"),c=0;c<t.length;c++)if(t[c].goods_price==n){t.splice(c,1);break}if(a(),window.localStorage.setItem("cart",JSON.stringify(t)),!t.length)return window.location.reload()})});